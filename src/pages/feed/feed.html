<!--
  Created by Ryan Roe for Beacon Capstone Project

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->

<ion-header>
  <ion-navbar color="secondary">
    <ion-buttons left>
      <button ion-button menuToggle icon-only>
        <ion-icon name="menu"></ion-icon>
      </button>
    </ion-buttons> 

    <ion-title>Beacon Feed</ion-title>

      <ion-buttons right>
        <button (click) = "btnSearchClicked()" ion-button icon-only>
          <ion-icon name='search' is-active="false"></ion-icon>
        </button>
      </ion-buttons>
      <ion-buttons right>
        <button (click) = "btnOrgClicked()" ion-button icon-only *ngIf="isAdmin">
          <ion-icon name='megaphone' is-active="false"></ion-icon>
        </button>
      </ion-buttons>

      <ion-buttons right>
        <button (click) = "btnCreateClicked()" ion-button icon-only *ngIf="isApprovedOrg">
          <ion-icon name='create' is-active="false"></ion-icon>
        </button>
      </ion-buttons>

      <ion-buttons right>
        <button (click) = "btnCreateClickedFalse()" ion-button icon-only *ngIf="isOrganization || isUser ">
          <ion-icon name='create' is-active="false"></ion-icon>
        </button>
      </ion-buttons>

  </ion-navbar>
</ion-header>


<ion-content>


<!--html template for the title, username, avatar, and date-->


 <!-- div class="chat-container" *ngFor=" let item of postList "> <!-- | orderBy: '-timestamp' > <!--let variable items be of type items, |async automatically checks for new updates-->
 <ion-list>
    <ion-card *ngFor=" let item of postList ">
      <!--Avatar image, title, and timestamp-->
      <ion-item>
        <ion-avatar item-start>
          <!-- <img src="assets/imgs/m48040100_ButtonLogo200.jpg" alt="Stock Profile Image"> -->
          <img src="{{ profilePicURL }}" alt="Stock Profile Image" (onload)="getProfilePic()">
        </ion-avatar>
        <h2>{{item.organization}}</h2>
        <h2>{{item.title}}</h2>
        <p>{{item.timestamp*(-1)  | date:'yyyy-MM-dd HH:mm:ss Z'}}</p> <span> </span> <p>{{item.PostType}}</p><span> </span>
        <p>Latitude: {{item.latitude}} </p> <span> </span>
        <p>Longitude: {{item.longitude}}</p>

      </ion-item>

      <!--creates the card content using two way data linking for an async for loop-->
      <ion-card-content>
        <a href="#">{{item.name}}</a>
        <p>{{item.message}}</p>
      </ion-card-content>
      <!--Creates the likes, comments, and time since post-->
    <ion-row>
      <ion-col>
        <button ion-button icon-left clear small>
          <ion-icon name="thumbs-up"></ion-icon>
          <div>0 Likes</div>
        </button>
      </ion-col>

      <ion-col>
        <button ion-button icon-left clear small>
        <ion-icon name="text"></ion-icon>
        <div>0 Comments</div>
        </button>
      </ion-col>

      <ion-col center text-center>
        <ion-note>
          <!--11h ago-->
        </ion-note>
      </ion-col>
    </ion-row>

  </ion-card>
</ion-list>

<ion-infinite-scroll (ionInfinite)="loadMorePosts($event)">
 <ion-infinite-scroll-content></ion-infinite-scroll-content>
</ion-infinite-scroll>

  <!--/div-->

</ion-content>
